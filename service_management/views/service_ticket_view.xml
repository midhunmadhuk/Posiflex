<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<data>
    <record id="service_order_form" model="ir.ui.view">
        <field name="name">service.order.form</field>
        <field name="model">service.order</field>
        <field name="arch" type="xml">
            <form string="Service Order">
                <header>
                    <!-- <button name="send" string="Send Now" type="object" states='outgoing' class="oe_highlight"/>
                    <button name="cancel" string="Cancel" type="object" states='outgoing'/>
                    <field name="state" widget="statusbar"/> -->
                </header>
                <sheet>
                    <group>
                        <field name="company_id"/>
                    </group>
                    <group>
                        <group string="Call Info">
                            <field name="name" readonly="1"/>
                            <field name="call_date"/>
                            <field name="call_date_time" readonly="1"/>
                            <field name="call_type"/>
                            <field name="status"/>
                            <field name="sub_status" domain="[('status_id','=',status)]"/>
                        </group>
                        <group string="Product Info">
                            <field name="serial_no"/>
                            <field name="product_categ_id"/>
                            <field name="product_no"/>
                            <field name="product_id"/>
                            <field name="ptav_product_variant_ids" widget="many2many_tags" domain="[('product_tmpl_id','=',product_id)]"/>
                        </group>
                        <group string="Customer Info">
                            <field name="customer_id"/>
                            <field name="customer_type"/>
                            <field name="mobile"/>
                            <field name="email"/>
                            <field name="address"/>
                        </group>
                        <group string="Warranty Info">
                            <field name="purchase_date"/>
                            <field name="proof_of_purchase"/>
                            <field name="proof_of_purchase_avl"/>
                            <field name="war_latest_id"/>
                            <field name="war_in_months"/>
                            <field name="war_start_date"/>
                            <field name="war_end_date"/>
                            <field name="war_status"/>
                        </group>
                        <group string="Assigning Info">
                        	<field name="zone"/>
                        	<field name="state_id"/>
                        	<field name="city"/>
                        	<field name="service_gm"/>
                        	<field name="service_rm"/>
                        	<field name="engineer_id"/>
                        	<field name="partner_type_id"/>
                        	<field name="partner_name_id"/>
                        </group>
                        <group string="Problem Info">
                        	<field name="problem_code"/>
                        	<field name="problem_desc"/>
                        	<field name="call_remarks"/>
                        	<separator string="Closure Info"/>
                        	<field name="resolved_date"/>
                        	<field name="closed_date"/>
                        	<field name="closure_desc"/>
                        </group>
                    </group>
                    <notebook>
                    	<page string="Customer Wise Call History" name="customer_call_history">
                    		<field name="call_history_ids">
                    			<tree editable="bottom">
                    				<field name="customer_id"/>
                    				<field name="name"/>
                    				<field name="call_tkt_no"/>
                    				<field name="product"/>
                    				<field name="serial_no"/>
                    				<field name="prob_code_id"/>
                    				<field name="action_code_id"/>
                    				<field name="status_id"/>
                    			</tree>
                    		</field>
                    	</page>
                    	<page string="Serial Wise Call History" name="serial_call_history">
                    		<field name="serial_history_ids">
                    			<tree editable="bottom">
                    				<field name="customer_id"/>
                    				<field name="name"/>
                    				<field name="call_tkt_no"/>
                    				<field name="product"/>
                    				<field name="serial_no"/>
                    				<field name="prob_code_id"/>
                    				<field name="action_code_id"/>
                    				<field name="status_id"/>
                    			</tree>
                    		</field>
                    	</page>
                    	<page string="Activity" name="activity_details">
                    		<field name="activity_ids">
                    			<tree editable="bottom">
                    				<field name="name"/>
                    				<field name="time" widget="float_time"/>
                    				<field name="engineer_id"/>
                    				<field name="partner_id"/>
                    				<field name="action_code"/>
                    				<field name="action_desc"/>
                    				<field name="action_remarks"/>
                    				<field name="status_id"/>
                    				<field name="sub_status_id"/>
                    			</tree>
                    		</field>
                    	</page>
                    	<page string="Spares Info" name="spares_history">
                    		<field name="spares_details_ids">
                    			<tree editable="bottom">
                    				<field name="item_no"  width="150px"/>
                    				<field name="name"/>
                    				<field name="serial_no" width="150px"/>
                    				<field name="billable" width="150px"/>
                    				<field name="war_in_months" width="200px"/>
                    			</tree>
                    		</field>
                    	</page>
                    	<page string="SLA Info" name="sla_info">
                    		<field name="sla_details_ids">
                    			<tree editable="bottom">
                    				<field name="name"  width="150px"/>
                    				<field name="customer_loc"  width="200px"/>
                    				<field name="tat_in_hours" widget="float_time"  width="150px"/>
                    				<field name="tat_achieved" string="TAT Achieved(Hr)" widget="float_time"  width="200px"/>
                    				<field name="sla_met"  width="150px"/>
                    			</tree>
                    		</field>
                    	</page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>
    
    <record id="service_order_tree" model="ir.ui.view">
        <field name="name">service.order.tree</field>
        <field name="model">service.order</field>
        <field name="arch" type="xml">
            <tree string="Service Order">
                <field name="name"/>
            </tree>
        </field>
    </record>

   <!--  <record id="sms_sms_view_search" model="ir.ui.view">
        <field name="name">sms.sms.view.search</field>
        <field name="model">sms.sms</field>
        <field name="arch" type="xml">
            <search string="Search SMS Templates">
                <field name="number"/>
                <field name="partner_id"/>
            </search>
        </field>
    </record> -->

    <record id="service_order_action" model="ir.actions.act_window">
        <field name="name">Service Order</field>
        <field name="res_model">service.order</field>
        <field name="view_mode">tree,form</field>
    </record>
    
    <!--Serial History  -->
    
    <record id="serial_history_form" model="ir.ui.view">
        <field name="name">serial.history.form</field>
        <field name="model">serial.history</field>
        <field name="arch" type="xml">
            <form string="Serial History" create="false" edit="false">
                <header>
                </header>
                <sheet>
                	<group>
                		<group>
                			<field name="name"/>
                			<field name="service_id"/>
                			<field name="war_start_dt"/>
                			<field name="war_in_months"/>
                			<field name="war_status_id"/>
                		</group>
                		<group>
                			<field name="product_id"/>
                			<field name="war_latest"/>
                			<field name="war_end_dt"/>
                			<field name="war_balance"/>
                		</group>
                	</group>
    			</sheet>
    		</form>
    	</field>
    </record>
    
    <record id="serial_history_tree" model="ir.ui.view">
        <field name="name">serial.history.tree</field>
        <field name="model">serial.history</field>
        <field name="arch" type="xml">
            <tree string="Serial History" create="false" edit="false">
                <field name="name"/>
                <field name="service_id"/>
                <field name="war_status_id"/>
                <field name="war_in_months"/>
            </tree>
        </field>
    </record>
    
     <record id="serial_history_action" model="ir.actions.act_window">
        <field name="name">Serial No. History</field>
        <field name="res_model">serial.history</field>
        <field name="view_mode">tree,form</field>
    </record>
    
	<!--Menu Config  -->
    <menuitem id="service_menu_root" name="Service Management"
        sequence="1"/>
        
     <menuitem id="service_menu"
     	name="Service Management"
        parent="service_menu_root"
        sequence="1"/>
        
     <menuitem id="service_order_menu"
        parent="service_menu"
        action="service_order_action"
        sequence="1"/>
        
     <menuitem id="serial_history_menu"
        parent="service_menu"
        action="serial_history_action"
        sequence="2"/>
	</data>
</odoo>